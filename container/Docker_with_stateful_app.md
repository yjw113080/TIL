## Stateful vs Stateless
1. stateful
컴퓨터 시스템에서 "state" 란, 어떤 시스템의 특정 시점에 갖는 상태값을 의미한다.
stateful 하다는 것은, 인풋과 이 state 값에 의해 다른 결과를 산출하는 것을 의미한다.
예를 들어서, 누가 당신에게 화면을 보고 5초 내에 숫자가 0이면 no라고 하고 1이면 yes라고 하라고 한다면 이건 stateful한 상황.
화면에 어떤 값이 나오느냐에 따라 답변을 해야 하기 때문에, 답변이 그 화면에 의해서만(not independently) 정의된다는 의미.

만약에 웹 서버가 클라이언트의 로그인 정보를 저장하여 백엔드 서버에서 갖고 있는다면, stateful app이다.
GET 요청에 의한 응답은 서버의 상태값(session)에 의해 생성될 수 있기 때문. 

2. stateless
stateless 하다는 건, "포도"라는 단어를 보면 "샤인머스캣"이라고 대답하라는 상황이다.
즉, 서버가 담고 있는 내용을 요청에 맞추어 매핑만되어 응답으로 나가면 된다. 이 상황에서는 그 서버의 state 값에 관계 없이 들고 있는 데이터에 의해서만 답변이 결정된다.

한 웹 서비스에서 서버에 세션을 저장하면 이건 stateful하다고 할 수 있다. 만약에 state 값이 클라이언트에 저장된다면? 이 때는 서버에 저장되는 게 아니라 브라우저에 저장되기 때문에 stateless하다고 한다. 

※ session은 되도록 피하는 것이 추세다. 서버에서 사용자마다 시간에 따라 계속 변하는 세션값을 갖게 되는 경우, 해당 서버가 이중화, 삼중화 되는 경우 세션을 불필요하게 중복해서 갖고 있어야 하기 때문이다 


https://nordicapis.com/defining-stateful-vs-stateless-web-services/


## 도커에서 stateful 한 어플리케이션을 운영할 때의 문제점
기본적으로 state(data)를 컨테이너의 파일 시스템에 기본으로 저장함.
그래서 소프트웨어 버전을 업그레이드하거나 다른 물리/가상 OS로 옮겨야 하는 경우에 데이터를 꺼내서 옮기기가 까다로워진다.

이런 이유 때문에 도커에서 stateful 한 어플리케이션을 운영해야 하는 경우에는, 컨테이너에 볼륨을 바인드해서 state 정보를 그 볼륨에 저장해야 한다.
`docker run -v hostFolder:/containerfolder`로 도커 컨테이너를 실행하면, `/containerfolder` 폴더 내의 변경사항을 `hostfolder`에 자동으로 받아올 수 있다.
nfs 드라이브에 대해서도 이와 같이 연동하면 어느 호스트 머신에서든 state 정보를 이용한 어플리케이션을 실행/운영할 수 있다.



