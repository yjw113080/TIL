# VPC
[image:5E860B85-E21E-405F-937E-2575C1F0073F-89130-00006AE6072035E6/94E7F1BE-68F1-4F30-9292-0B7878351C34.png]

## Endpoint
1. 개념
* 엔드포인트는 수평적으로 확장 가능하며가용성이 매우 뛰어난 가상 디바이스로서, VPC 내 인스턴스와 AWS 서비스 간에 통신을 허용합니다.

* 모든 네트워크 트래픽을 AWS 네트워크 내부에 유지하면서 고객이 높은 가용성과 확장성 방식으로 AWS에 호스팅된 서비스에 액세스할 수 있도록 합니다.

* 엔드포인트는 사용자가 선택한 라우팅 테이블에 항목을 추가하고, 트래픽을 Amazon의 프라이빗네트워크를 통해 지원되는 서비스로 라우팅

2. 종류
* S3용 VPC 엔드포인트를 사용하면 모든 트래픽이 Amazon의 네트워크 내에서 유지되도록 하고, 추가적인 액세스 정책을 Amazon S3 트래픽에 적용할 수 있습니다

* 인터페이스 유형 VPC 엔드포인트를 생성
VPC 내 프라이빗 IP가 연결된 ENI(Elastic Network Interface)로 표시됨.
인터페이스 기반 VPC 엔드포인트는 서브넷의 ENI이므로 데이터 전송 요금은 트래픽 소스에 따라 달라집니다

## Pricing
* VPC 자체를 생성 및 사용하는 데에는 별도의 비용이 없습니다.

* 하드웨어 VPN 연결을 사용하여 VPC를 회사의 데이터 센터에 연결하는 경우, VPN연결 시간(VPN 연결이 “사용 가능” 상태인 시간)당 요금이 부과

* VPC의 인터넷 게이트웨이를 통해 Amazon S3와 같은 Amazon Web Services에 액세스하는 동안에는 데이터 전송 요금이 발생하지 않습니다.

* VPN 연결을 통해 AWS 리소스에 액세스하면 인터넷 데이터 전송 요금이 청구


## 인터넷 통신하게 만들기
1. 탄력적 IP 주소(EIP)를 비롯하여 퍼블릭 IP 주소를 사용하면, VPC 내의 인스턴스가 인터넷으로 직접 아웃바운드 통신을 할 수 있고 인터넷으로부터(예: 웹 서버) 임의의 인바운드 트래픽을 수신

2. NAT 게이트웨이 또는 NAT 인스턴스를 통해 트래픽을 라우팅
NAT 게이트웨이 또는 NAT 인스턴스는 아웃바운드 통신을 허용하지만, 인터넷상에서 시스템이 프라이빗 주소의 인스턴스에 연결을 시도하는 것을 허용하지 않습니다.

3. 인터넷 게이트웨이를 사용하면 VPC에서 인터넷에 액세스

4. Amazon S3의 모든 트래픽이 Direct Connect 또는 VPN 연결을 트래버스하고 데이터센터에서 벗어나 퍼블릭 AWS 네트워크로 재진입


## 온프레미스와 통신하게 만들기
1. 하드웨어 VPN 연결 또는 Direct Connect 연결이 지원
온프레미스에 있는 애플리케이션은 AWS Direct Connect를 통해 Amazon VPC에 있는 서비스 엔드포인트에 연결할 수 있습니다.

2. 가상 프라이빗 게이트웨이의 인터넷 트래픽을 사용자의 기존 데이터 센터로 라우팅할 수 있습니다.


## NACL vs Security Group
VPC 내의 보안 그룹은 Amazon EC2 인스턴스 사이에서 어떤 트래픽을 허용할 것인지를 지정합니다. 네트워크 ACL은 서브넷 수준에서 작동하며, 서브넷에 출입하는 트래픽을 평가합니다.


## Peering
* 리전 간 VPC 피어링은 전 세계모든 상용 리전(중국 제외)에서 사용할 수 있습니다.

* 피어링된 VPC 내 인스턴스 간 트래픽은 프라이빗 상태를 유지하며 격리됩니다

* 리전 간 VPC 피어링 트래픽은 내장된 중복성 및 동적 대역폭 할당 기능을 지원하는 AWS 백본으로 이동합니다.

* Route 53 프라이빗 DNS는 리전 간 VPC 피어링을 사용한 프라이빗 IP 주소를 확인하는데 사용할 수 있습니다.

EC2-Classic 플랫폼의 EC2 인스턴스가 프라이빗 IP주소를 사용해 VPC의 인스턴스와 통신할 수 있도록 지원합니다





## BYOIP
1. 개념
* 자체 IP 주소의 신뢰도를 전략적 자산으로 간주하고 AWS에서 해당 IP를 리소스와 함께 사용

* 고객은 IP 범위를 계속 소유하게되지만 AWS에서 인터넷 노출을 담당합니다.

2. Why BYOIP?
* 아웃바운드 이메일 MTA와 같은 서비스를 유지하고 높은 IP 신뢰도를 보유한 고객

* 화이트리스트에 의존하는 워크로드를 새 IP 주소를 포함하는 화이트리스트의 재설정 없이 그대로 AWS로 옮길 수 있습니다

* IP를 디바이스에 하드 코딩하거나 IP에 대한 아키텍처 종속성

* 규정 및 준수 이유로 인해 특정 IP를 사용해야 하는 경우


## Subnet
서브넷은 하나의 가용 영역 내에서만 상주

## 기타
VPC와 같은 리전에 위치해 있다면 Amazon EBS 스냅샷을 사용할 수 있습니다.


